auto2 = {
"name": "auto2",
"avg": {' CityMPG+': 21.0, ' HighwayMPG+': 28.0, ' Weight-': 3040.0, ' Class-\n': 17.7, 'N': 93, 'E': 0},
"sway1": {' CityMPG+': 29.789473684210527, ' HighwayMPG+': 34.421052631578945, ' Weight-': 2115.0, ' Class-\n': 8.757894736842106, 'N': 5.947368421052632, 'E': 5},
"sway2": {' CityMPG+': 30.9, ' HighwayMPG+': 36.45, ' Weight-': 2131.0, ' Class-\n': 8.97, 'N': 9.45, 'E': 8},
"xpln1": {' CityMPG+': 29.57894736842105, ' HighwayMPG+': 33.63157894736842, ' Weight-': 2290.7894736842104, ' Class-\n': 9.726315789473684, 'N': 17.36842105263158, 'E': 0},
"xpln2": {' CityMPG+': 31.0, ' HighwayMPG+': 36.25, ' Weight-': 2115.25, ' Class-\n': 8.834999999999999, 'N': 8.55, 'E': 0},
"top": {' CityMPG+': 33.0, ' HighwayMPG+': 41.0, ' Weight-': 2045.0, ' Class-\n': 8.6, 'N': 6, 'E': 93}}

auto93 = {
"name": "auto93",
"avg": {'Lbs-': 2800.0, 'Acc+': 15.5, 'Mpg+\n': 20.0, 'N': 398, 'E':0},
"sway1": {'Lbs-': 2121.0, 'Acc+': 16.415789473684214, 'Mpg+\n': 35.78947368421053, 'N': 12.947368421052632, 'E': 6},
"sway2": {'Lbs-': 1965.0, 'Acc+': 17.0, 'Mpg+\n': 30.0, 'N': 60.0, 'E': 8},
"xpln1": {'Lbs-': 2199.684210526316, 'Acc+': 15.994736842105262, 'Mpg+\n': 30.0, 'N': 71.05263157894737, 'E': 0},
"xpln2": {'Lbs-': 1965.0, 'Acc+': 17.0, 'Mpg+\n': 30.0, 'N': 60.0, 'E': 0},
"top": {'Lbs-': 2025.0, 'Acc+': 18.8, 'Mpg+\n': 40.0, 'N': 13, 'E':398}}

china = {
"name": "china",
"avg": {'N_effort-': 2098.0, 'N': 499, 'E': 0},
"sway1": {'N_effort-': 377.3157894736842, 'N': 15.947368421052632, 'E': 6},
"sway2": {'N_effort-': 763.1, 'N': 244.55, 'E': 8},
"xpln1": {'N_effort-': 785.3684210526316, 'N': 101.47368421052632, 'E': 0},
"xpln2": {'N_effort-': 763.15, 'N': 244.5, 'E': 0},
"top": {'N_effort-': 145.0, 'N': 16, 'E': 499}}

coc1000 = {
"name": "coc1000",
"avg": {'LOC+': 1034.0, ' AEXP-': 3.0, ' PLEX-': 3.0, ' RISK-': 5.0, ' EFFORT-\n': 20776.0, 'N': 1000, 'E': 0},
"sway1": {'LOC+': 1035.9333333333334, ' AEXP-': 2.7333333333333334, ' PLEX-': 3.0, ' RISK-': 4.533333333333333, ' EFFORT-\n': 18902.6, 'N': 21.0, 'E': 7},
"sway2": {'LOC+': 1575.0, ' AEXP-': 3.0, ' PLEX-': 2.0, ' RISK-': 8.0, ' EFFORT-\n': 67203.25, 'N': 73.75, 'E': 8},
"xpln1": {'LOC+': 1106.2, ' AEXP-': 2.933333333333333, ' PLEX-': 3.066666666666667, ' RISK-': 5.266666666666667, ' EFFORT-\n': 21712.0, 'N': 336.53333333333336, 'E': 0},
"xpln2": {'LOC+': 1583.0, ' AEXP-': 3.0, ' PLEX-': 2.15, ' RISK-': 7.7, ' EFFORT-\n': 67395.35, 'N': 67.0, 'E': 0},
"top": {'LOC+': 1543.0, ' AEXP-': 2.0, ' PLEX-': 1.0, ' RISK-': 3.0, ' EFFORT-\n': 31323.0, 'N': 21, 'E': 1000}}

coc10000 = {
"name": "coc10000",
"avg": {'Loc+': 1009.0, ' Risk-': 5.0, ' Effort-\n': 20024.0, 'N': 10000, 'E': 0},
"sway1": {'Loc+': 969.625, ' Risk-': 3.4375, ' Effort-\n': 15668.875, 'N': 78.6875, 'E': 8},
"sway2": {'Loc+': 1438.05, ' Risk-': 6.9, ' Effort-\n': 47127.8, 'N': 1148.35, 'E': 8},
"xpln1": {'Loc+': 1038.375, ' Risk-': 5.125, ' Effort-\n': 21324.0, 'N': 3146.8125, 'E': 0},
"xpln2": {'Loc+': 1431.7, ' Risk-': 6.9, ' Effort-\n': 47097.2, 'N': 1148.2, 'E': 0},
"top": {'Loc+': 1959.0, ' Risk-': 0.0, ' Effort-\n': 17752.0, 'N': 79, 'E': 10000}}

healthHard = {
"name": "healthHard",
"avg": {'MRE-': 74.96, 'ACC+': 7.18, 'PRED40+': 25.0, 'N': 10000, 'E':0},
"sway1": {'MRE-': 73.65750000000001, 'ACC+': 7.562500000000002, 'PRED40+': 25.0, 'N': 78.65, 'E': 8},
"sway2": {'MRE-': 75.36449999999999, 'ACC+': 7.0684999999999985, 'PRED40+': 25.625, 'N': 1737.35, 'E': 8},
"xpln1": {'MRE-': 73.73800000000001, 'ACC+': 7.546500000000002, 'PRED40+': 25.0, 'N': 3210.15, 'E': 0},
"xpln2": {'MRE-': 75.3155, 'ACC+': 7.0595, 'PRED40+': 25.625, 'N': 1736.8, 'E': 0},
"top": {'MRE-': 64.91, 'ACC+': 11.4, 'PRED40+': 25.0, 'N': 79, 'E': 10000}}

healthEasy = {
"name": "healthEasy",
"avg": {'MRE-': 119.19, 'ACC+': -12.24, 'PRED40+': 0.0, 'N': 10000, 'E': 0},
"sway1": {'MRE-': 25.142, 'ACC+': -0.139, 'PRED40+': 62.4975, 'N': 78.95, 'E': 8},
"sway2": {'MRE-': 0.0, 'ACC+': 0.0, 'PRED40+': 83.32999999999998, 'N': 580.2, 'E': 8},
"xpln1": {'MRE-': 10.05, 'ACC+': -0.049, 'PRED40+': 74.99699999999999, 'N': 2873.65, 'E': 0},
"xpln2": {'MRE-': 0.0, 'ACC+': 0.0, 'PRED40+': 83.32999999999998, 'N': 580.2, 'E': 0},
"top": {'MRE-': 0.0, 'ACC+': 0.0, 'PRED40+': 83.33, 'N': 79, 'E':10000}}

nasa = {
"name": "nasa",
"avg": {'Kloc+': 47.5, 'Effort-': 252.0, 'Defects-': 2007.0, 'Months-\n': 21.4, 'N': 93, 'E': 0},
"sway1": {'Kloc+': 13.305882352941177, 'Effort-': 58.11764705882353, 'Defects-': 530.0588235294117, 'Months-\n': 13.429411764705884, 'N': 5.9411764705882355, 'E': 5},
"sway2": {'Kloc+': 13.355, 'Effort-': 62.4, 'Defects-': 574.05, 'Months-\n': 14.084999999999999, 'N': 41.45, 'E':8},
"xpln1": {'Kloc+': 17.99411764705882, 'Effort-': 81.4470588235294, 'Defects-': 725.7058823529412, 'Months-\n': 14.876470588235293, 'N': 15.529411764705882, 'E': 0},
"xpln2": {'Kloc+': 13.305000000000001, 'Effort-': 62.3, 'Defects-': 568.75, 'Months-\n': 14.094999999999999, 'N': 41.25, 'E': 0},
"top": {'Kloc+': 3.5, 'Effort-': 10.8, 'Defects-': 109.0, 'Months-\n': 7.8, 'N': 6, 'E': 93}}

pom = {
"name": "pom",
"avg": {'Cost-': 322.77, 'Completion+': 0.89, 'Idle-\n': 0.23, 'N': 10000, 'E': 0},
"sway1": {'Cost-': 278.4825, 'Completion+': 0.9087500000000001, 'Idle-\n': 0.21875, 'N': 78.375, 'E': 8},
"sway2": {'Cost-': 138.09950000000003, 'Completion+': 0.8855000000000002, 'Idle-\n': 0.24300000000000002, 'N': 1562.35, 'E': 8},
"xpln1": {'Cost-': 351.92125, 'Completion+': 0.8962500000000001, 'Idle-\n': 0.24375, 'N': 8415.875, 'E': 0},
"xpln2": {'Cost-': 137.30699999999996, 'Completion+': 0.8870000000000001, 'Idle-\n': 0.2395, 'N': 1562.35, 'E': 0},
"top": {'Cost-': 138.51, 'Completion+': 1.0, 'Idle-\n': 0.0, 'N': 78, 'E': 10000}}

ssm = {
"name": "ssm",
"avg": {'NUMBERITERATIONS-': 7.0, 'N': 239360, 'E': 0},
"sway1": {'NUMBERITERATIONS-': 5.05, 'N': 467.95, 'E': 10},
"sway2": {'NUMBERITERATIONS-': 6.0, ' TIMETOSOLUTION-\n': 127.78049999999999, 'N': 214235.0, 'E': 8},
"xpln1": {'NUMBERITERATIONS-': 5.55, 'N': 11070.4, 'E': 0},
"xpln2": {'NUMBERITERATIONS-': 6.15, ' TIMETOSOLUTION-\n': 127.035, 'N': 214237.4, 'E': 0},
"top": {'NUMBERITERATIONS-': 3.0, 'N': 468, 'E': 239360}}

ssn = {
"name": "ssn",
"avg": {'PSNR-': 45.9, ' Energy-\n': 1236.02, 'N': 53662, 'E': 0},
"sway1": {'PSNR-': 45.022999999999996, ' Energy-\n': 1508.113, 'N': 209.9, 'E': 9},
"sway2": {'PSNR-': 45.71500000000001, ' Energy-\n': 1274.5030000000002, 'N': 52981.0, 'E': 8},
"xpln1": {'PSNR-': 45.8155, ' Energy-\n': 1473.3939999999998, 'N': 6492.95, 'E': 0},
"xpln2": {'PSNR-': 45.762499999999996, ' Energy-\n': 1252.962, 'N': 52981.0, 'E': 0},
"top": {'PSNR-': 26.7, ' Energy-\n': 465.94, 'N': 210, 'E': 53662}}

print("hello")
keys = ["avg", "sway1", "sway2", "xpln1", "xpln2", "top"]
ds = [auto2, auto93, china, coc1000, coc10000, healthHard, healthEasy, nasa, pom, ssm, ssn]


def fastNormalize(item, v):
    try:
        res = (item - v[0]) / (v[1] - v[0])
    except ZeroDivisionError:
        res = item
    if not 0 < res < 1:
        return 0
    else:
        return res
    

def fastAvg(l):
    avg = 0
    for item in l:
        avg += item
    avg /= len(l)
    return avg


# The general idea is to normalize the values, then take the differences, add them together and divide them by how many there are then average them out based on that.
for d in ds:
    print("Data set tax results for [%s]" % d["name"])
    bases = {}
    for key in d["avg"].keys():
        bases[key] = [d["avg"][key], d["top"][key]]
    
    sway1tax = []
    sway2tax = []
    xpln1tax = []
    xpln2tax = []
    for key, val in bases.items():
        # sway1tax += (fastNormalize(val[0], val) - fastNormalize(d["sway1"][key], val))
        # sway2tax += (fastNormalize(val[0], val) - fastNormalize(d["sway2"][key], val))
        # xpln1tax += (fastNormalize(d["sway1"][key], val) - fastNormalize(d["xpln1"][key], val))
        # xpln2tax += (fastNormalize(d["sway2"][key], val) - fastNormalize(d["xpln2"][key], val))
        
        sway1tax.append(val[1] - d["sway1"][key] if val[1] > d["sway1"][key] else d["sway1"][key] - val[1])
        sway2tax.append(val[1] - d["sway2"][key] if val[1] > d["sway2"][key] else d["sway2"][key] - val[1])
        xpln1tax.append(d["sway1"][key] - d["xpln1"][key] if val[1] > d["sway1"][key] else d["xpln1"][key] - d["sway1"][key])
        xpln2tax.append(d["sway2"][key] - d["xpln2"][key] if val[1] > d["sway2"][key] else d["xpln2"][key] - d["sway2"][key])

    # sway1tax /= len(bases)
    # sway2tax /= len(bases)
    # xpln1tax /= len(bases)
    # xpln2tax /= len(bases)

    print("Sway1 sampling tax:", sway1tax)
    print("Sway2 sampling tax:", sway2tax)
    print("Xpln1 Explanation tax:", xpln1tax)
    print("Xpln2 Explanation tax:", xpln2tax)
    print("--------")

print("-------------")
print("Now Normalizing...")
print("-------------")
sway1 = []
sway2 = []
xpln1 = []
xpln2 = []

for d in ds:
    print("Data set tax results for [%s]" % d["name"])
    bases = {}
    for key in d["avg"].keys():
        bases[key] = [d["avg"][key], d["top"][key]]

    sway1tax = 0
    sway2tax = 0
    xpln1tax = 0
    xpln2tax = 0
    for key, val in bases.items():
        sway1tax += (fastNormalize(val[0], val) - fastNormalize(d["sway1"][key], val))
        sway2tax += (fastNormalize(val[0], val) - fastNormalize(d["sway2"][key], val))
        xpln1tax += (fastNormalize(d["sway1"][key], val) - fastNormalize(d["xpln1"][key], val))
        xpln2tax += (fastNormalize(d["sway2"][key], val) - fastNormalize(d["xpln2"][key], val))

    sway1tax /= len(bases)
    sway2tax /= len(bases)
    xpln1tax /= len(bases)
    xpln2tax /= len(bases)

    print("Sway1 sampling tax: [%f]" % sway1tax)
    print("Sway2 sampling tax: [%f]" % sway2tax)
    print("Xpln1 Explanation tax: [%f]" % xpln1tax)
    print("Xpln2 Explanation tax: [%f]" % xpln2tax)
    print("--------")

    sway1.append(sway1tax)
    sway2.append(sway2tax)
    xpln1.append(xpln1tax)
    xpln2.append(xpln2tax)

print("---------")
print("---------")
print("---------")
print("The average sample tax for sway1 (normalized): [%f]" % fastAvg(sway1))
print("The average sample tax for sway2 (normalized): [%f]" % fastAvg(sway2))
print("The average sample tax for xpln1 (normalized): [%f]" % fastAvg(xpln1))
print("The average sample tax for xpln2 (normalized): [%f]" % fastAvg(xpln2))

"""
# key test
for key in keys:
    for d in ds:
        print(d["name"])
        val = d[key]
"""
print("done")